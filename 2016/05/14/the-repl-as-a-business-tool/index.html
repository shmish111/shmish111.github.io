<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> The REPL as a business tool · Continuously Improving</title><meta name="description" content="The REPL as a business tool - David Smith"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/shmish111" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">The REPL as a business tool</h1><div class="post-time">May 14, 2016</div><div class="post-content"><blockquote>
<p>The REPL can save hours of pain through pairing with non-technical colleagues.</p>
</blockquote>
<p>The boundary between a business user and a developer can often be a big source of waste. Going back and forth between the user and your code to discover what data is really needed can really cause pain and waste a huge amount of time. The REPL can be used as an interactive environment to pair with a user and write the exact code required, first time.<br><a id="more"></a></p>
<h2 id="The-Problem"><a href="#The-Problem" class="headerlink" title="The Problem "></a>The Problem <img src="/images/image.jpg" alt=""></h2><p>Recently I was developing a middleware system where data would come in via HTTP as JSON, be converted into SOAP XML and sent to a finance system. As usual, the field names in the finance system were completely different from the system they being provided by. There were spreadsheets which attempted to define this mapping but the system was evolving and the spreadsheet was not always correct. For example, there were 3 different date fields that all sounded very similar, which one should be sent to the finance system?</p>
<h2 id="‘M’"><a href="#‘M’" class="headerlink" title="‘M’"></a>‘M’</h2><p>There was a colleague (lets call him ‘M’) who understood how to use both systems and really knew what the data meant, he had the knowledge but he had no idea how to program. After a number of attempts at getting the mapping correct myself, each requiring a build, deploy and test cycle, I was getting a bit frustrated. I had a big screen with the Clojure mapping on one side and a REPL running on the other and I realized that anyone should be able to understand what was going on if they could see the input, the mapping and the output.</p>
<h2 id="A-perfect-match"><a href="#A-perfect-match" class="headerlink" title="A perfect match"></a>A perfect match</h2><p>M and I sat together at my desk and I loaded up a sample of incoming data as a Clojure map, keywords to values. The keywords had been generated by the system providing the data so M knew exactly what they meant. I then showed him the current mapping on the left and called the mapping function in the REPL to produce output for that data. M could clearly see where the data had come from and quickly pointed out that the wrong date was being used. A quick change and synchronize the REPL and we tried again.</p>
<p>This time it was a bit less clear, M could see that something was not right but wasn’t sure which fields were available, the incoming data was a big nested map with vectors of nested maps so it was difficult to distinguish what was what. A bit of <code>-&gt;&gt;</code> with some <code>map</code> and <code>filter</code> and a sprinkling of <code>keys</code> made things clear. The REPL had enabled us to zoom in on data and hide what was unimportant and clouding our vision.</p>
<h2 id="Problem-solved"><a href="#Problem-solved" class="headerlink" title="Problem solved"></a>Problem solved</h2><p>Our session lasted about 15 minutes and at the end the mapping was 100% correct, I had live confirmation from a user. The code went live and into production and everything now works correctly. It was clear; our short session pairing at the REPL had saved days if not weeks of back and forth, getting things slightly wrong and reading through spreadsheets. It was a lesson that has saved me many more painful hours since and I am sure in the future.</p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>I have not seriously used another language that would have enabled anything like this responsiveness in this particular situation and it has shown me how important it is to use the best programming language for the job. In this case, that language was Clojure.</p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/04/27/beating-bugs-with-brute-force/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2016 <a href="http://shmish111.github.io">David Smith</a>, unless otherwise noted.</p></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-52255315-1",'auto');ga('send','pageview');</script><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "//hm.baidu.com/hm.js?a36e15d9e2adec9a21fcdd9f686b1ed2";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>